<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Visualizations | Crowd Dynamics at Harvard University</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Visualizations" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Repository for CS 205 Final Project, Spring 2019" />
<meta property="og:description" content="Repository for CS 205 Final Project, Spring 2019" />
<link rel="canonical" href="http://localhost:4000/visualizations.html" />
<meta property="og:url" content="http://localhost:4000/visualizations.html" />
<meta property="og:site_name" content="Crowd Dynamics at Harvard University" />
<script type="application/ld+json">
{"url":"http://localhost:4000/visualizations.html","headline":"Visualizations","description":"Repository for CS 205 Final Project, Spring 2019","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Crowd Dynamics at Harvard University" /></head><body><header class="site-header" style="display: flex">
        <img class="h_logo" src="/images/seas.png" >
    <div class="wrapper"><a class="site-title" rel="author" href="/">Crowd Dynamics at Harvard University</a><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger" />
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewBox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
              </svg>
            </span>
          </label>
  
          <div class="trigger"><a class="page-link" href="/">Overview</a><a class="page-link" href="/implementation.html">Implementation</a><a class="page-link" href="/requirements.html">Requirements</a><a class="page-link" href="/tuning.html">Tuning</a><a class="page-link" href="/performance.html">Performance</a><a class="page-link" href="/visualizations.html">Visualizations</a></div>
        </nav></div>
        <img class="h_logo" src="/images/iacs.png" >
  </header>
  <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Visualizations</h1>
  </header>

  <div class="post-content">
    <p>Here are some visualizations of what the detections look like.</p>

<h2 id="plaza-metrics">Plaza Metrics</h2>

<h3 id="average-number-of-people-in-the-plaza">Average Number of People in the Plaza</h3>

<p>Ever wonder when people are around the plaza the most?
We’re able to see when people start moving around the square, and how many
people are moving at any point in time.
We count the number of people in the square at any point in time.
For example, here is a bar chart for the average number of people in the plaza,
while aggregating with a window of 20 minutes for Thursday, April 11.
We are able to see from the aggregated analytics when classes finish.</p>

<p align="center"> 
<img src="images/classtimesthursday.png" />
</p>

<p>If you want to explore a subset of the data yourself,
check out this interactive graph.
There are a few icons on the right side of the graph for the controls.
When every control is toggled, you can use your scroll wheel to zoom in
or zoom out, and click and drag to move the graph around.
Furthermore, you can get a detailed timestamp and information by hovering
over the individual bars.</p>

<iframe src="interactive_analytics_graph.html" sandbox="allow-same-origin allow-scripts" width="750" height="500" align="center" scrolling="no" seamless="seamless" frameborder="0" style="display: block; margin-left: auto; margin-right: auto; width: 500">
</iframe>

<h3 id="average-velocity">Average Velocity</h3>

<p>In order to compute the average velocity in each frame, we must consider the detected objects in the next frame.
For person A in frame $i$, we need to identify the location of person A in frame $i+1$, and then approximate the velocity in frame i by dividing the distance traveled (between person A’s centers) by the time, which is the inverse of the fps (frames per second).</p>

<p>So, first, we must link people between frames.
Since people are constantly entering and leaving the frame, the number of objects per frame ($n_i$) may not be consistent between successive frames.
Therefore, for each frame, we can compute at most $\text{min}(n_i, n_{i+1})$ velocities.
We compute pairwise distances between all objects in different frames, sort the pairs in ascending order of distance, and then greedily label each unassigned object in frame $i$ to the closest unassigned object in frame $i+1$.
We account for the edge case of a person leaving one end of the frame and another person entering on the opposite side of the next frame by only linking people whose distance is within a predefined threshold of 30% of the frame width or length.
In particular, we compute the Euclidean distance between the centers (where the two dimensions of the centers are in $[0, 1]$ as proportions of the frame dimension length), and then do not link objects if the distance exceeds $0.3$.</p>

<p>Here is an example image, where the first frame (A) has 6 detected people, and the second frame (B) has 3 detected people. The green lines denote the link, and the velocity is computed as the length of the green line times the fps.</p>

<p align="center"> 
<img src="images/linking.png" />
</p>

<h2 id="hotspots">Hotspots</h2>

<p>How does the distribution of people in the plaza change over time?
Check out the heatmap of where people are standing in the image here.
This is just the how the distribution of people in the plaza evolves
over the day.
The specific day depicted in the video was April 10, 2019.</p>

<iframe width="640" height="360" src="https://www.youtube.com/embed/JhHHnR9V0NI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="youtube" style="padding:20px;"></iframe>

<p>We see that in the mornings, the distirbution is relatively uniform along
the plaza, and occupy where the food trucks are (since the food trucks
don’t come until noon).
Then, we can see the different paths through the plaza light up as
students try to get to class, and also the paths taken by tourists.
We also see hotspots at the food trucks around 1 PM, from people eating
lunch.</p>

<h2 id="looking-at-the-detections">Looking at the Detections</h2>

<p>It’s also nice to be able to look at the detections themselves.
We are able to get the detections and plot different classes to check if the
detections are reasonable.</p>

<iframe width="640" height="360" src="https://www.youtube.com/embed/eN9tTVJ9J2c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="youtube" style="padding:20px;"></iframe>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Crowd Dynamics at Harvard University</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Crowd Dynamics at Harvard University</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Repository for CS 205 Final Project, Spring 2019</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
